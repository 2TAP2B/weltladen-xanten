---
import BaseLayout from "../layouts/BaseLayout.astro";
import PageHeader from "../components/Sections/PageHeader.astro";
import StaffList from "../components/Sections/StaffList.astro";
import Button from "../components/UI/Button.astro";
import { getStaffPageHeader, getAssetUrl } from "../utils/directus";

// Fetch staff page header from Directus
const staffHeader = await getStaffPageHeader();

// Use Directus content if available, otherwise use defaults
const title = staffHeader?.title || "Unser Team";
const subtitle = staffHeader?.subtitle || "Die Menschen hinter der Eine Welt Gruppe Xanten";
const backgroundImage = staffHeader?.background_image 
  ? getAssetUrl(staffHeader.background_image, { width: 1920, height: 600, fit: 'cover', quality: 80 })
  : "/uploads/page-header-bg.webp";
---

<BaseLayout
  title="Mitarbeiter - Eine Welt Gruppe Xanten"
  description="Lernen Sie unser engagiertes Team kennen, das sich für eine gerechtere Welt einsetzt."
>
  <PageHeader 
    title={title}
    subtitle={subtitle}
    backgroundImage={backgroundImage}
  />
  
  <!-- Staff List -->
  <StaffList />
  
  <!-- Contact Staff CTA -->
  <section class="py-16 bg-gray-50">
    <div class="container">
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="text-3xl md:text-4xl font-bold mb-6">Kontakt zu unserem Team?</h2>
        <p class="text-xl text-gray-600 mb-8">
          Unser Team steht Ihnen gerne zur Verfügung und beantwortet alle Ihre Fragen. 
          Zögern Sie nicht, sich direkt an unsere Teammitglieder zu wenden oder unser Hauptbüro zu kontaktieren.
        </p>
        
        <div class="flex flex-wrap justify-center gap-4">
          <a 
            href="/contact" 
            class="inline-flex items-center justify-center px-5 py-3 text-base font-medium text-white bg-primary-600 rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"
          >
            Kontaktieren Sie uns
          </a>
          
          <Button 
            href="/ueber-uns" 
            variant="outline"
            class="inline-block"
          >
            ← Zurück zu Über uns
          </Button>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>