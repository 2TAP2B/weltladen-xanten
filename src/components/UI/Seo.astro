---
export interface Props {
  title: string;
  description: string;
  image?: {
    url: string;
    alt: string;
  };
  type?: "website" | "article";
  canonicalUrl?: string;
}

const {
  title,
  description,
  image = {
    url: "/eine-welt-gruppe2.webp",
    alt: "Eine Welt Gruppe Xanten",
  },
  type = "website",
  canonicalUrl,
} = Astro.props;

// Get the canonical URL
const canonicalURL = canonicalUrl || new URL(Astro.url.pathname, Astro.site);

// Organization info
const orgInfo = {
  name: "Eine Welt Gruppe Xanten e.V.",
  address: {
    streetAddress: "Kurfürstenstraße 5",
    addressLocality: "Xanten",
    addressRegion: "NRW",
    postalCode: "46509",
    addressCountry: "DE",
  },
  telephone: "+49 2801 70 57 79",
  email: "info@weltladenxanten.de",
  url: Astro.site?.toString() || "https://weltladenxanten.de",
};
---

<!-- Basic SEO -->
<title>{title}</title>
<meta name="description" content={description} />
<link rel="canonical" href={canonicalURL} />

<!-- Open Graph / Facebook -->
<meta property="og:type" content={type} />
<meta property="og:url" content={canonicalURL} />
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:image" content={new URL(image.url, Astro.site)} />
<meta property="og:image:alt" content={image.alt} />

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:url" content={canonicalURL} />
<meta property="twitter:title" content={title} />
<meta property="twitter:description" content={description} />
<meta property="twitter:image" content={new URL(image.url, Astro.site)} />
<meta property="twitter:image:alt" content={image.alt} />

<!-- JSON-LD Schema for Organization -->
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "${orgInfo.name}",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "${orgInfo.address.streetAddress}",
      "addressLocality": "${orgInfo.address.addressLocality}",
      "addressRegion": "${orgInfo.address.addressRegion}",
      "postalCode": "${orgInfo.address.postalCode}",
      "addressCountry": "${orgInfo.address.addressCountry}"
    },
    "telephone": "${orgInfo.telephone}",
    "email": "${orgInfo.email}",
    "url": "${orgInfo.url}"
  }
</script>

{
  type === "article" && (
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": "${title}",
        "image": "${new URL(image.url, Astro.site)}",
        "description": "${description}",
        "publisher": {
          "@type": "Organization",
          "name": "${orgInfo.name}",
          "logo": {
            "@type": "ImageObject",
            "url": "${new URL("/eine-welt-gruppe2.webp", Astro.site)}"
          }
        },
        "url": "${canonicalURL}",
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "${canonicalURL}"
        }
      }
    </script>
  )
}